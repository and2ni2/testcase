# Задание 1
Задача 1. Обработка курсов валют Национального Банка Республики Казахстан

1) Создание БД в mysql. CREATE DATABASE testcase_db; Заполняем подключение к базе в .env;
2) В терминале забиваем "composer install", для загрузки всех необходимых пакетов из composer.json (Laravel Sanctum) и далее "php artisan vendor:publish --provider="Laravel\Sanctum\SanctumServiceProvider".
3) В терминале забиваем "php artisan migrate" для того, чтобы создалась таблица "currency", а так же все необходимые таблицы laravel sanctum + "php artisan optimize".

Таблица называется "currency" исходя из ТЗ, поэтому в модели указываем protected $table = 'currency' для того, чтобы избежать ошибки о не найденной таблице currencies.

Загрузка данных из первоисточника: Создана команда "currencies:update", которая может запускаться кастомно через Крон, либо по команде "php artisan currencies:update". Логика работы такова: Забираем данные из "https://nationalbank.kz/rss/rates_all.xml?switch=russian" -> получаем XML, конвертируем в JSON и забираем только массив из список курсов валют. Циклом пробегаемся по массиву и на каждой итерации проверяем имеется ли запись в БД с таким же 'name' + 'date' и если имеется просто обновляем 'rate', если же 'name' имеется, но 'date' отличается либо все отличается, то тогда создается новая запись. Т.е если данные за текущий день уже имеются и снова пришли за текущий день, но уже с другими курсами валют мы их просто обновим. А если это данные за вчерашний день (допустим, имеются в БД), то мы создадим новые записи и не перезатрем их.
В конце имеется уведомление в терминал о завершении и так же запись в логи, где указывается local.INFO с датой и временем.

Задача 2 - Реализация REST API сервисов.

P/s Изначально подумал, что нужно создать интерфейс на фронте для получения запросов и отображения данных. Поэтому начал создавать страницы авторизации, регистрации, а так же начал внедрять vue для работы над всем этим и фронт части. Далее понял, что нужно было просто создать запросы и фронт не нужен... Объяснение тому, почему в проекте ненужные файлы.

Исходя из мысли выше подразумевалось, что токен буду брать из авторизованного юзера. Но далее было решено просто создать запрос для регистрации юзера и получения токена.
Post запрос "127.0.0.1:8000/api/get_token" с параметрами 1.name, 2.email, 3.password. Получаем в ответ юзера и token, далее этим токеном пользуемся во всех последующих запросах т.к они защищены bearer авторизацией.

1) '127.0.0.1:8000/api/currencies/{date}' где {date} - дата за которую необходимо получить записи в формате "d.m.Y". Если записей нет получаем 404. Если записи имеются проводим их через Ресурс-коллекцию, где отдаем только необходимые данные с пагинацией.
2) '127.0.0.1:8000/api/currency/{name}' где {name} - название валюты (например USD). Так же параметром можно передать "?date=16.07.2022", если параметр имеется мы будем получать курсы валют по USD за эту дату, если параметра нет, то по умолчанию будем получать за текущую дату.


# Задание 2
Задача 1 - Загрузка первоначальных данных
